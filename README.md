# Telegram Bot для передачи показаний счетчиков

Бот предназначен для сбора показаний счетчиков воды, электричества и тепла от жильцов многоквартирного дома.

## Основной функционал

- Регистрация пользователей (номер квартиры, ФИО)
- Регистрация счетчиков (серийные номера, описания)
- Подача показаний счетчиков
- Проверка на корректность показаний (не меньше предыдущих)
- История подачи показаний
- Редактирование серийных номеров счетчиков

## Доступные команды

- `/start` - регистрация/просмотр профиля
- `/submit` - подать показания счетчиков
- `/edit_serials` - изменить серийные номера счетчиков

## Структура базы данных

Бот использует SQLite базу данных со следующими таблицами:

1. `users` - информация о пользователях
   - user_id (Telegram ID)
   - apartment_number (номер квартиры)
   - first_name, last_name

2. `meter_types` - типы счетчиков
   - type_id
   - name (electricity, heat, hot_water, cold_water)
   - unit (единицы измерения)

3. `meters` - счетчики
   - meter_id
   - apartment_number
   - type_id
   - count_meter

4. `serials` - серийные номера счетчиков
   - serial_id
   - meter_id
   - serial_number

5. `readings` - показания счетчиков
   - reading_id
   - meter_id
   - user_id (кто подал)
   - value (значение)
   - reading_date (дата подачи)

6. `meter_descriptions` - описания счетчиков
   - desc_id
   - serial_id
   - description

## Установка и запуск

1. Клонировать репозиторий
2. Установить зависимости с помощью uv (из pyproject.toml):
```bash
uv venv  # создание виртуального окружения
source .venv/bin/activate  # активация (Linux/MacOS)
# или .venv\Scripts\activate  # Windows

uv sync  # установка зависимостей
```
3. Создать файл `config.py` с настройками:
```python
BOT_TOKEN = "ваш_токен_бота"
```
4. Запустить бота:
```bash
python3.12 main.py
```

**Требования:**
- Python >= 3.12
- uv (современный менеджер пакетов Python)

## Конфигурация

Основные настройки хранятся в файле `config.py`:
- `BOT_TOKEN` - токен Telegram бота

Логирование:
- Логи сохраняются в файл `logs.log`
- Уровень логирования: INFO для консоли, ERROR для файла

## Технологии

- Python 3.12+
- Aiogram 3.x
- SQLAlchemy 2.x
- SQLite
- uv (менеджер пакетов)
